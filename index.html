<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>New tab</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: black;
      }

      body {
        background-color: transparent;
        background-size: cover;
        background-position: center center;
        background-repeat: no-repeat;
      }

      .visible {
        visibility: visible;
        opacity: 1;
        transition: opacity .5s linear;
      }

      .hidden {
        visibility: hidden;
        opacity: 0;
        transition: visibility 0s .5s, opacity .5s linear;
      }
    </style>
  </head>
  <body class="hidden">
    <script>
      /* jshint asi: true, laxcomma: true */
      var data = {
          "backgrounds": [
              {
                  "accent": "rgb(120, 126, 181)",
                  "filename": "01.jpg",
                  "source": "Dave Morrow",
                  "sourceUrl": "https://www.flickr.com/photos/daves-f-stop/8079071366",
                  "title": "La Push, Washington, USA"
              },
              {
                  "accent": "rgb(212, 162, 87)",
                  "filename": "02.jpg",
                  "source": "Magdalena Roeseler",
                  "sourceUrl": "https://www.flickr.com/photos/magdalenaroeseler/10497301253",
                  "title": "Zug, Switzerland"
              },
              {
                  "accent": "rgb(77, 120, 99)",
                  "filename": "03.jpg",
                  "source": "Stian Klo",
                  "sourceUrl": "http://500px.com/photo/41198398/h%C3%B8yvika-beach-by-stian-klo",
                  "title": "And\u00f8ya, Norway"
              },
              {
                  "accent": "rgb(237, 150, 131)",
                  "filename": "04.jpg",
                  "source": "skoeber",
                  "sourceUrl": "https://www.flickr.com/photos/asphericlens/6345711358",
                  "title": "Saxon Switzerland, Germany"
              },
              {
                  "accent": "rgb(180, 108, 72)",
                  "filename": "05.jpg",
                  "source": "skoeber",
                  "sourceUrl": "https://www.flickr.com/photos/asphericlens/14366773224",
                  "title": "Saxon Switzerland, Germany"
              },
              {
                  "accent": "rgb(232, 185, 49)",
                  "filename": "06.jpg",
                  "source": "skoeber",
                  "sourceUrl": "https://www.flickr.com/photos/asphericlens/7160610404",
                  "title": "Saxony, Germany"
              },
              {
                  "accent": "rgb(190, 130, 61)",
                  "filename": "07.jpg",
                  "source": "Submit Source",
                  "sourceUrl": "mailto:feedback@blah.com",
                  "title": "Source Unknown"
              },
              {
                  "accent": "rgb(180, 84, 44)",
                  "filename": "08.jpg",
                  "source": "Jes\u00fas Ignacio Bravo Soler",
                  "sourceUrl": "http://500px.com/photo/68800189/singular-by-jes%C3%BAs-ignacio-bravo-soler",
                  "title": "Otzarreta Forest, Spain"
              },
              {
                  "accent": "rgb(191, 96, 109)",
                  "filename": "09.jpg",
                  "source": "Dave Morrow",
                  "sourceUrl": "https://www.flickr.com/photos/daves-f-stop/9593394811",
                  "title": "Palouse Falls, Washington, USA"
              },
              {
                  "accent": "rgb(154, 150, 199)",
                  "filename": "10.jpg",
                  "source": "Dave Morrow",
                  "sourceUrl": "https://www.flickr.com/photos/daves-f-stop/11713436133",
                  "title": "San Francisco, California, USA"
              },
              {
                  "accent": "rgb(168, 212, 39)",
                  "filename": "11.jpg",
                  "source": "Dave Morrow",
                  "sourceUrl": "https://www.flickr.com/photos/daves-f-stop/8272381830",
                  "title": "Auster-Skaftafellssysla, Iceland"
              },
              {
                  "accent": "rgb(60, 164, 180)",
                  "filename": "12.jpg",
                  "source": "Chris Zielecki",
                  "sourceUrl": "https://www.flickr.com/photos/zanthia/7870409330",
                  "title": "Hvide Sande, Denmark"
              },
              {
                  "accent": "rgb(181, 86, 58)",
                  "filename": "13.jpg",
                  "source": "skoeber",
                  "sourceUrl": "https://www.flickr.com/photos/asphericlens/7227178308",
                  "title": "Paptsdorf, Germany"
              },
              {
                  "accent": "rgb(61, 108, 180)",
                  "filename": "14.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/3124621920",
                  "title": "Teton Range, Wyoming, USA"
              },
              {
                  "filename": "15.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/8704121860/",
                  "title": "Tokyo, Japan"
              },
              {
                  "filename": "16.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/11114091294/",
                  "title": "Li Jiang, China"
              },
              {
                  "filename": "17.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/11783297005/",
                  "title": "Hobbiton, New Zealand"
              },
              {
                  "filename": "18.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/8686957036/",
                  "title": "Sydney, Australia"
              },
              {
                  "filename": "19.jpg",
                  "source": "Cristian Ruberti",
                  "sourceUrl": "https://www.flickr.com/photos/ambsab/11197203555/in/pool-2179950@N25/",
                  "title": "Monte Sagro, Italy"
              },
              {
                  "filename": "20.jpg",
                  "source": "invno1",
                  "sourceUrl": "http://www.reddit.com/r/EarthPorn/comments/2fbuw4/mt_jefferson_taken_from_the_pacific_crest_trail_3/",
                  "title": "Mt. Jefferson, Oregon, USA"
              },
              {
                  "filename": "21.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/8498614095",
                  "title": "Glenorchy, New Zealand"
              },
              {
                  "filename": "22.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/6961023258",
                  "title": "Oahu, Hawaii"
              },
              {
                  "filename": "23.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/12933604573/",
                  "title": "Virgin Gorda, Virgin Islands"
              },
              {
                  "filename": "24.jpg",
                  "source": "Romain Guy",
                  "sourceUrl": "https://www.flickr.com/photos/romainguy/3409068082/",
                  "title": "San Francisco, California, USA"
              },
              {
                  "filename": "25.jpg",
                  "source": "Romain Guy",
                  "sourceUrl": "https://www.flickr.com/photos/romainguy/8338439169/",
                  "title": "Antelope Canyon, Arizona, USA"
              },
              {
                  "filename": "26.jpg",
                  "source": "Romain Guy",
                  "sourceUrl": "https://www.flickr.com/photos/romainguy/6840341477/",
                  "title": "Kalalu, Hawaii, USA"
              },
              {
                  "filename": "27.jpg",
                  "source": "David Cantu",
                  "sourceUrl": "http://500px.com/photo/37449470/-the-view-from-jalama-bluffs-by-david-cantu",
                  "title": "Point Arbuello, California, USA"
              },
              {
                  "filename": "28.jpg",
                  "source": "Steve Dunleavy",
                  "sourceUrl": "https://www.flickr.com/photos/stevedunleavy/5192342061/",
                  "title": "Grand Canyon, Arizona, USA"
              },
              {
                  "filename": "29.jpg",
                  "source": "Conor MacNeill",
                  "sourceUrl": "http://500px.com/photo/18655061/yangshuo-cyclist-by-conor-macneill",
                  "title": "Guilin, China"
              },
              {
                  "filename": "30.jpg",
                  "source": "Steve Dunleavy",
                  "sourceUrl": "https://www.flickr.com/photos/stevedunleavy/5044329063/",
                  "title": "Yosemite, California, USA"
              },
              {
                  "filename": "31.jpg",
                  "source": "Jyrki Salmi",
                  "sourceUrl": "http://www.flickr.com/photos/salman2000/9321259912",
                  "title": "Stunted Pine"
              },
              {
                  "filename": "32.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/8468378029",
                  "title": "Great Wall of China"
              },
              {
                  "filename": "33.jpg",
                  "source": "Trey Ratcliff",
                  "sourceUrl": "https://www.flickr.com/photos/stuckincustoms/12375331335",
                  "title": "Crater Lake, Oregon, USA"
              },
              {
                  "filename": "34.jpg",
                  "source": "Adrian Simionov",
                  "sourceUrl": "http://500px.com/photo/63850509/the-place-of-no-words-by-adrian-simionov",
                  "title": "Queenstown, New Zealand"
              },
              {
                  "filename": "35.jpg",
                  "impressionUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=10918568&PluID=0&ord=[timestamp]&rtu=-1",
                  "shutterstockPromo": true,
                  "source": "Photo by <img src='img/shutterstock.png'>",
                  "sourceUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=10918568&PluID=0&ord=[timestamp]",
                  "title": "Forest Road"
              },
              {
                  "filename": "36.jpg",
                  "impressionUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=10918570&PluID=0&ord=[timestamp]&rtu=-1",
                  "shutterstockPromo": true,
                  "source": "Photo by <img src='img/shutterstock.png'>",
                  "sourceUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=10918570&PluID=0&ord=[timestamp]",
                  "title": "Boating"
              },
              {
                  "filename": "37.jpg",
                  "impressionUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=10918571&PluID=0&ord=[timestamp]&rtu=-1",
                  "shutterstockPromo": true,
                  "source": "Photo by <img src='img/shutterstock.png'>",
                  "sourceUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=10918571&PluID=0&ord=[timestamp]",
                  "title": "On the Beach"
              },
              {
                  "filename": "38.jpg",
                  "impressionUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=19&mc=imp&pli=10918572&PluID=0&ord=[timestamp]&rtu=-1",
                  "shutterstockPromo": true,
                  "source": "Photo by <img src='img/shutterstock.png'>",
                  "sourceUrl": "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=10918572&PluID=0&ord=[timestamp]",
                  "title": "National Bison Range, Montana, USA"
              }
          ]
      }

      // Returns a random integer between min (included) and max (excluded)
      // Using Math.round() will give you a non-uniform distribution!
      // from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
      function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
      }

      var randomItem = data.backgrounds[getRandomInt(1, data.backgrounds.length)]
      var img = new Image()
      img.src = "backgrounds/" + randomItem.filename
      img.onload = function() {
        document.body.style.backgroundImage = "url(" + img.src +")";
        document.body.className = "visible"
      }

      // we can't do that, history API is limited to current domain
      // well we don't have a domain for file:/// so we are screwed...
      // any idea ?
      // history.pushState({}, "", "");
    </script>
  </body>
</html>
